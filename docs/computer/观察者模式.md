# 观察者模式

多个观察者观察某一对象, 这一对象发生改变时通知所有观察着的对象

浏览器的事件触发就是使用的这一模式。

```
class EventBus {
  constructor(){
    this.eventbus = {}
  }
  // add watcher
  on(eventName, fn){
    if(this.eventbus.eventName){
      this.eventbus.eventName.push(fn)
    } else {
      this.eventbus.eventName = [fn]
    }
  }
  // 发布
  emit(eventName){
    if(Reflect.has(eventName)){
      // 观察者按添加顺序全部通知
      this.eventbus.eventName.forEach(fn => {
        fn()
      })
    }
  }
  // 取消监听
  remove(eventName, fn){
    if(Reflect.has(eventName)){
      let index = this.eventbus.eventName.indexOf(fn)
      if(index !== -1){
        this.evnetbus.splice(index, 1)
      }
    }
  }
}
```
