## 观察者模式

一个目标对象管理所有相依于它的观察者对象，并且在它本身的状态改变时主动发出通知。这通常透过呼叫各观察者所提供的方法来实现。此种模式通常被用来实时事件处理系统。

## 发布订阅模式

发布订阅是一种消息范式, 消息的发送者(发布者)不会将消息直接发送给特定的接受者(订阅者)。而是将发布的消息分为不同的类别, 无需了解哪些订阅者可能存在。 

```
class EventBus {
  constructor(){
    this.eventbus = {}
  }
  // add watcher
  on(eventName, fn){
    if(this.eventbus.eventName){
      this.eventbus.eventName.push(fn)
    } else {
      this.eventbus.eventName = [fn]
    }
  }
  // 发布
  emit(eventName){
    if(Reflect.has(eventName)){
      // 观察者按添加顺序全部通知
      this.eventbus.eventName.forEach(fn => {
        fn()
      })
    }
  }
  // 取消监听
  remove(eventName, fn){
    if(Reflect.has(eventName)){
      let index = this.eventbus.eventName.indexOf(fn)
      if(index !== -1){
        this.evnetbus.splice(index, 1)
      }
    }
  }
}
```
